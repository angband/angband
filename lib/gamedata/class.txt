# File: class.txt


# This file is used to initialize the "player class" information for Angband.

# Do not modify this file unless you know exactly what you are doing,
# unless you wish to risk possible system crashes and broken savefiles.

# === Understanding class.txt ===

# Format:
# name:class number:class name
# stats:str:int:wis:dex:con
# skill-disarm:base:increment
# skill-device:base:increment
# skill-save:base:increment
# skill-stealth:base:increment
# skill-search:base:increment
# skill-melee:base:increment
# skill-shoot:base:increment
# skill-throw:base:increment
# skill-dig:base:increment
# info:mhp:exp
# attack:max_attacks:min_weight:att_multiply
# title:title
# equip:tval:sval:min:max
# player-flags:class flags
# magic:spell_first:spell_weight:num_books
# book:tval:quality:name:spells:realm
# book-graphics:symbol:color
# book-properties:cost:commonness:min to max
# spell:name:level:mana:fail:exp
# effect:effect:subtype (if needed):radius (if needed):parameter (if needed)
# dice:dice string
# expr:dice expression
# effect-msg:message
# desc: description


# 'name' indicates the beginning of an entry. The serial number must
# increase for each new class.

# 'stats' is for the stat modifiers - strength, intelligence, wisdom,
# dexterity, constitution.

# 'skill-<skill name>' is for skills - physical and magical disarming,
# magic devices, saving throws, stealth, to hit (normal), to hit (bows),
# to hit (throwing), digging.  The base entry is what gets added to the
# character's skills at birth, the increments are added to the base skill
# every ten levels.

# 'info' is for extra info - max. hitpoints gained per level, experience
# factor in percent.

# 'attack' is for attack info - maximum possible number of attacks, minimum
# weapon weight for calculating the number of attacks, multiplier for
# attack calculations.

# 'equip' is for starting equipment - tval of the item, sval of the item,
# minimum amount, maximum amount.

# 'flags' is for class flags.

# 'title' is for class titles.

# 'magic' is for general magic info - level of the first spell, weight that
# hurts spells, number of books used.

# 'book' defines one of these books - object base, whether a town or a dungeon
# book, name, number of spells, book realm.  A book needs to be defined for
# each class which uses it, as otherwise it is not recognized as one of that
# class's books. It cannot be equipped until defined.

# 'book-graphics' is for symbol and color as used in object.txt.
# 'book-graphics:' lines refer to the previous book line, and need not be
# included if a book of the same name has been defined earlier.

# 'book-properties' is for object properties of a book - cost, commonness,
# and minimum and maximum depths of occurrence.
# 'book-properties:' lines refer to the previous book line, and need not be
# included if a book of the same name has been defined earlier.

# 'spell' defines an individual spell - name, level, mana required,
# fail-rate, experience for first casting.    'spell:' lines always refer to
# spells in the previous 'book:' line.  The lines below are all used in
# reference to the previous 'spell:' line.

# 'effect' defines the spell effect (as listed in src/list-effects.h),
# and optionally parameters for effect subtype, effect radius and
# an extra parameter for various things

# 'dice' provides a random value to be used by an effect (for damage,
# healing, etc).  As well as the normal random value fields described above,
# it can contain expressions like $B, which refer forward to an 'expr' line.

# 'expr' provides an expression for use in effect dice.  It consists of a
# code letter (eg B) for the expression, a base function to use (for example
# PLAYER_LEVEL), and a sequence of operations to perform on that base.

# 'effect-msg' provides a message which can be used in whatever way the effect
# needs, typically to print during the effect, or as a death message.

# 'desc' is for description. As many desc: lines may be used as are needed
# to describe the spell. Note that lines will need spaces at their
# ends or the beginning of the next line to prevent words from running
# together.



############### WARRIOR ###############
name:Warrior
stats:3:-2:-2:2:2
skill-disarm-phys:25:15
skill-disarm-magic:20:10
skill-device:18:7
skill-save:18:10
skill-stealth:0:0
skill-search:10:12
skill-melee:70:45
skill-shoot:55:45
skill-throw:55:45
skill-dig:0:0
hitdie:9
max-attacks:6
min-weight:30
strength-multiplier:5
equip:food:Ration of Food:1:3
equip:light:Wooden Torch:1:3
equip:potion:Berserk Strength:1:1
equip:sword:Dagger:1:1
equip:soft armour:Soft Leather Armour:1:1
equip:scroll:Word of Recall:1:1
player-flags:BRAVERY_30 | NO_MANA | SHIELD_BASH
title:Rookie
title:Soldier
title:Swordsman
title:Swashbuckler
title:Veteran
title:Myrmidon
title:Commando
title:Champion
title:Hero
title:Lord


############### MAGE ###############
name:Mage
stats:-3:3:0:0:-2
skill-disarm-phys:30:10
skill-disarm-magic:35:12
skill-device:36:13
skill-save:30:9
skill-stealth:2:0
skill-search:10:12
skill-melee:35:15
skill-shoot:20:15
skill-throw:20:15
skill-dig:0:0
hitdie:0
max-attacks:4
min-weight:40
strength-multiplier:2
equip:food:Ration of Food:1:3
equip:light:Wooden Torch:1:3
equip:sword:Rapier:1:1
equip:scroll:Word of Recall:1:1
player-flags:ZERO_FAIL | BEAM | CHOOSE_SPELLS
title:Novice
title:Apprentice
title:Trickster
title:Illusionist
title:Spellbinder
title:Evoker
title:Conjurer
title:Warlock
title:Sorcerer
title:Arch-Mage

magic:1:300:5

book:magic book:town:[First Spells]:7:arcane
book-graphics:?:R
book-properties:25:40:1 to 100
equip:magic book:[First Spells]:1:1

spell:Magic Missile:1:1:22:4
effect:BOLT_OR_BEAM:MISSILE:0:-10
dice:$Dd4
expr:D:PLAYER_LEVEL:- 1 / 5 + 3
desc:Fires a magic missile that always hits its target and does
desc: unresistable damage.
desc:  Sometimes a beam is fired instead that hurts each monster
desc: in its path.
desc:  The chance to get a beam goes up with your character level.

spell:Light Room:1:2:26:4
effect:LIGHT_AREA
effect:SPOT:LIGHT_WEAK:2
dice:1
desc:Lights up all squares within 2 grids of the player, and hurts
desc: all light-sensitive monsters in the area of effect.
desc:  If you are in a room, the entire room will be lit up as well.

spell:Find Traps, Doors & Stairs:1:1:20:2
effect:DETECT_TRAPS
effect-yx:22:40
effect:DETECT_DOORS
effect-yx:22:40
effect:DETECT_STAIRS
effect-yx:22:40
desc:Detects all traps, doors, and stairs in the immediate area.

spell:Phase Door:2:2:22:4
effect:TELEPORT
dice:10
desc:Teleports you randomly up to 10 squares away.

spell:Electric Arc:2:2:34:4
effect:SHORT_BEAM:ELEC:0:1
dice:$Dd6
expr:D:PLAYER_LEVEL:- 1 / 5 + 3
desc:Creates an electrical discharge that hurts monsters and destroys
desc: vulnerable items in its path.  Length of the effect increases
desc: with player level.

spell:Detect Monsters:3:2:24:4
effect:DETECT_VISIBLE_MONSTERS
effect-yx:22:40
desc:Detects all non-invisible monsters in the immediate area,
desc: for one turn only.

spell:Fire Ball:6:5:33:5
effect:BALL:FIRE:2
dice:$B
expr:B:PLAYER_LEVEL:* 2
desc:Shoots a radius-2 fire ball.

book:magic book:town:[Attacks and Knowledge]:6:arcane
book-graphics:?:R
book-properties:400:40:10 to 100

spell:Recharging:5:5:28:6
effect:RECHARGE
dice:$B
expr:B:PLAYER_LEVEL:/ 8 + 6
desc:Adds charges to a stack of wands or staves.
desc:  Chance of success and number of charges gained increase with your
desc: level and decrease with level of wand or staff and number of charges.
desc:  A failed attempt to recharge destroys one wand or staff from the stack.

spell:Identify Rune:8:7:25:8
effect:IDENTIFY
desc:Reveals an unknown rune on an object.

spell:Treasure Detection:10:3:60:5
effect:DETECT_GOLD
effect-yx:22:40
effect:SENSE_OBJECTS
effect-yx:22:40
desc:Detects gold and senses objects in the immediate area.

spell:Frost Bolt:13:5:40:6
effect:BOLT_OR_BEAM:COLD
dice:$Dd8
expr:D:PLAYER_LEVEL:- 5 / 3 + 6
desc:Shoots a bolt of frost that always hits its target.
desc:  Sometimes a beam is fired instead that hurts each monster
desc: in its path.
desc:  The chance to get a beam goes up with your character level.

spell:Reveal Monsters:15:6:40:8
effect:DETECT_INVISIBLE_MONSTERS
effect-yx:22:40
effect:DETECT_VISIBLE_MONSTERS
effect-yx:22:40
desc:Detects all monsters in the immediate area, for one turn only.

spell:Acid Spray:20:5:30:12
effect:ARC:ACID:10:60
dice:$Dd8
expr:D:PLAYER_LEVEL:/ 2
desc:Sprays acid in a 60-degree cone, hitting all monsters up to 10 grids away.

book:magic book:town:[Magical Defences]:6:arcane
book-graphics:?:R
book-properties:1600:20:30 to 100

spell:Disable Traps, Destroy Doors:5:5:30:6
effect:TOUCH:KILL_DOOR
effect:TOUCH:KILL_TRAP
desc:Disables traps and destroys doors within a 1-square radius of you.

spell:Teleport Self:7:6:35:5
effect:TELEPORT
dice:M$M
expr:M:PLAYER_LEVEL:* 9 / 5
desc:Teleports you randomly within the current level.

spell:Teleport Other:15:10:30:12
effect:BOLT_STATUS:AWAY_ALL
dice:$B
expr:B:PLAYER_LEVEL:* 3
desc:Produces a bolt that teleports away the first monster in its path.
desc: Distance teleported increases with player level.

spell:Resistance:20:20:65:20
effect:TIMED_INC:OPP_ACID
dice:20+d20
effect:TIMED_INC:OPP_ELEC
dice:20+d20
effect:TIMED_INC:OPP_COLD
dice:20+d20
effect:TIMED_INC:OPP_FIRE
dice:20+d20
desc:Grants you resistance to acid, cold, fire and lightning for 20+1d20 turns.

spell:Tap Magical Energy:22:2:30:12
effect:TAP_DEVICE
effect:TIMED_INC:STUN
dice:1d2
desc:Turns wand or staff energy into mana; tapping stuns the player briefly.

spell:Mana Channel:25:10:50:20
effect:TIMED_INC:FASTCAST
dice:5+1d5
desc:Doubles spellcasting speed for 5+1d5 turns.

book:magic book:dungeon:[Arcane Control]:6:arcane
book-graphics:?:r
book-properties:30000:15:40 to 100

spell:Door Creation:13:9:40:12
effect:TOUCH:MAKE_DOOR
desc:A door is created on each empty floor space that is directly
desc: adjacent to you.  These doors are closed, but not locked.

spell:Mana Bolt:25:8:60:30
effect:BOLT_OR_BEAM:MISSILE
dice:$Dd8
expr:D:PLAYER_LEVEL:- 10
desc:Fires a magic missile that always hits its target and does
desc: unresistable damage.
desc:  Sometimes a beam is fired instead that hurts each monster
desc: in its path.
desc:  The chance to get a beam goes up with your character level.

spell:Teleport Level:28:17:65:20
effect:TELEPORT_LEVEL
desc:Teleports you 1 level up or 1 level down (chosen at random).
desc:  This spell may have no effect when the forced descent option is set.

spell:Detection:30:10:70:30
effect:DETECT_TRAPS
effect-yx:22:40
effect:DETECT_DOORS
effect-yx:22:40
effect:DETECT_STAIRS
effect-yx:22:40
effect:DETECT_GOLD
effect-yx:22:40
effect:SENSE_OBJECTS
effect-yx:22:40
effect:DETECT_INVISIBLE_MONSTERS
effect-yx:22:40
effect:DETECT_VISIBLE_MONSTERS
effect-yx:22:40
desc:Detects all treasure, objects and monsters in the immediate area.

spell:Dimension Door:35:30:80:40
effect:TELEPORT_TO
desc:Teleports you to (or near to) a square of your choice.

spell:Thrust Away:40:12:90:40
effect:SHORT_BEAM:FORCE:1:10
dice:$Dd8
expr:D:PLAYER_LEVEL:+ 0
desc:Fires a short range beam of force.

book:magic book:dungeon:[Wizard's Tome of Power]:5:arcane
book-graphics:?:r
book-properties:50000:10:60 to 100

spell:Shock Wave:20:5:40:16
effect:BALL:SOUND:2
dice:$B
expr:B:PLAYER_LEVEL:* 2
desc:Shoots a radius-2 sound ball.
desc:  Apart from doing sound damage, this also has a chance to stun
desc: each monster in the area of effect.

spell:Explosion:30:10:50:20
effect:BALL:SHARD:2
dice:$B
expr:B:PLAYER_LEVEL:* 2
effect:BALL:FORCE:2
dice:$B
expr:B:PLAYER_LEVEL:/ 5
desc:Shoots a radius-2 shards ball and throws around anything in the area of
desc: effect.

spell:Banishment:35:45:95:25
effect:BANISH
desc:Removes all monsters represented by a chosen symbol from the level.
desc:  Uniques are not affected.
desc:  You take 1d4 points of damage for every monster removed.

spell:Mass Banishment:40:75:90:100
effect:MASS_BANISH
desc:Removes all monsters within 20 squares of you.
desc:  Uniques are not affected.
desc:  You take 1d3 points of damage for every monster removed.

spell:Mana Storm:45:16:85:200
effect:BALL:MANA:3
dice:$B
expr:B:PLAYER_LEVEL:* 2 + 300
desc:Shoots a radius-3 mana ball that does unresistable
desc: damage to each monster in its area of effect.


############### DRUID ###############
name:Druid
stats:-2:0:3:-2:0
skill-disarm-phys:30:10
skill-disarm-magic:30:10
skill-device:24:10
skill-save:30:10
skill-stealth:3:0
skill-search:12:12
skill-melee:45:20
skill-shoot:40:30
skill-throw:40:30
skill-dig:0:0
hitdie:2
max-attacks:4
min-weight:35
strength-multiplier:3
equip:food:Ration of Food:1:3
equip:hafted:Whip:1:1
equip:light:Wooden Torch:1:3
equip:scroll:Word of Recall:1:1
player-flags:ZERO_FAIL | CHOOSE_SPELLS | CHARM
title:Wanderer
title:Tamer
title:Nurturer
title:Gardener
title:Forester
title:Creator
title:Earth Warder
title:Windrider
title:Stormwielder
title:High Mystic

magic:1:350:5

book:nature book:town:[Lesser Charms]:6:nature
book-graphics:?:y
book-properties:25:40:1 to 100
equip:nature book:[Lesser Charms]:1:1

spell:Detect Life:1:1:23:2
effect:DETECT_LIVING_MONSTERS
effect-yx:22:40
desc:Detects all living monsters in the immediate area, for one turn only.

spell:Fox Form:1:2:20:10
effect:SHAPECHANGE:fox
desc:Changes you into the shape of a quick and stealthy fox.
desc:  While shapechanged you cannot use items.

spell:Remove Hunger:2:2:25:2
effect:NOURISH:INC_TO
dice:50
desc:Magically renders you comfortably fed (but not satiated).

spell:Stinking Cloud:3:2:27:4
effect:BALL:POIS:2
dice:$B
expr:B:PLAYER_LEVEL:/ 2 + 10
desc:Shoots a radius-2 poison ball.

spell:Confuse Monster:5:3:30:5
effect:BOLT_AWARE:MON_CONF
dice:5+d$S
expr:S:PLAYER_LEVEL:- 5
desc:Confuse a single monster; more effective against animals.

spell:Slow Monster:6:4:30:5
effect:BOLT_STATUS:MON_SLOW
dice:5+d$S
expr:S:PLAYER_LEVEL:- 5
desc:Slows down a monster; more effective against animals.

book:nature book:town:[Gifts of Nature]:6:nature
book-graphics:?:y
book-properties:400:40:10 to 100

spell:Cure Poison:4:4:30:4
effect:CURE:POISONED
desc:Neutralizes poison.

spell:Resist Poison:7:6:32:5
effect:TIMED_INC:OPP_POIS
dice:20+d20
desc:Grants you resistance to poison for 20+1d20 turns.

spell:Turn Stone to Mud:8:3:25:5
effect:LINE:KILL_WALL
dice:20+1d30
desc:Produces a beam that destroys the first section of wall or rubble it hits,
desc: unless it is a permanent wall.  Each monster caught in the beam that
desc: is susceptible to rock remover takes 20+1d30 points of damage.

spell:Sense Surroundings:9:4:35:6
effect:MAP_AREA
dice:$Dd$S
expr:D:PLAYER_LEVEL:/ 30 + 1 * 22
expr:S:PLAYER_LEVEL:/ 30 + 1 * 44
desc:Maps the nearby area.

spell:Lightning Strike:12:6:35:8
effect:STRIKE:ELEC:0
dice:$Dd4
expr:D:PLAYER_LEVEL:/ 4
effect:STRIKE:SOUND:3
dice:$B
expr:B:PLAYER_LEVEL:+ 5
desc:Strikes a target from above with a lightning bolt, followed by a clap
desc: of thunder.

spell:Earth Rising:14:5:40:12
effect:SHORT_BEAM:SHARD:4:5
dice:$Dd6
expr:D:PLAYER_LEVEL:/ 3 + 2
desc:Causes shards to explode in a line out of the earth, striking objects and
desc: monsters. Length of the line increases with player level.

book:nature book:dungeon:[Creature Dominion]:5:nature
book-graphics:?:o
book-properties:10000:20:30 to 100

spell:Trance:20:10:45:15
effect:TOUCH_AWARE:MON_HOLD
dice:3+d$D
expr:D:PLAYER_LEVEL:/ 7
desc:Holds every adjacent, non-resistant monster for a level-dependent
desc: number of turns; animals are entranced for longer.

spell:Mass Sleep:25:15:50:15
effect:PROJECT_LOS:SLEEP_ALL
dice:$B
expr:B:PLAYER_LEVEL:* 10 + 500
desc:Attempts to put to sleep each monster within line of sight.
desc:  Monsters that resist sleep are not affected.

spell:Become Pukel-man:30:20:75:50
effect:SHAPECHANGE:Pukel-man
desc:Gives you the form of a statue of the Drúedain, slow but hard to hurt.

spell:Eagle's Flight:35:20:80:80
effect:SHAPECHANGE:eagle
desc:Gives you the form of one of the great eagles of Manwë.

spell:Bear Form:40:20:85:100
effect:SHAPECHANGE:bear
desc:Allows you to take the form of a great bear of the mountains, sweeping
desc: aside your enemies with your mighty paws.

book:nature book:dungeon:[Nature Craft]:5:nature
book-graphics:?:o
book-properties:30000:15:40 to 100

spell:Tremor:20:20:60:16
effect:EARTHQUAKE:TARGETED:4
desc:Causes a targeted 4-square radius earthquake.
desc:  Earthquakes may hurt the player, damage monsters and destroy items
desc: in some squares in the area of effect.
desc:  Artifacts will not be destroyed by this spell.
desc:  This spell has no effect when used in the town.

spell:Haste Self:25:12:65:15
effect:TIMED_INC:FAST:0:5
dice:$B+d20
expr:B:PLAYER_LEVEL:+ 0
desc:Hastes you (+10 to speed) for a level-dependent duration.

spell:Revitalize:35:70:90:90
effect:RESTORE_STAT:STR
effect:RESTORE_STAT:INT
effect:RESTORE_STAT:WIS
effect:RESTORE_STAT:DEX
effect:RESTORE_STAT:CON
effect:RESTORE_EXP
desc:Restores all stats and experience points to maximum.

spell:Rapid Regeneration:37:20:90:100
effect:TIMED_INC:HEAL
dice:5+1d3
desc:Speed up digestion to increase regeneration of hitpoints for
desc: the next 5+1d3 turns (or until hungry).

spell:Herbal Curing:40:20:90:100
effect:CURE:CUT
effect:CURE:POISONED
effect:CURE:STUN
effect:CURE:BLACKBREATH
desc:Cures all cuts, poison, stunning and black breath.

book:nature book:dungeon:[Wild Forces]:5:nature
book-graphics:?:o
book-properties:50000:10:60 to 100

spell:Meteor Swarm:30:14:85:20
effect:SWARM:METEOR:1
dice:$B+m$M
expr:B:PLAYER_LEVEL:/ 2 + 30
expr:M:PLAYER_LEVEL:/ 20 + 2
desc:Shoots a swarm of 3 or 4 meteors.
desc:  Meteors will travel until hitting a wall, a monster,
desc: or reaching the target location.
desc:  Meteors will explode as a radius-1 ball that does unresistable
desc: damage to each monster in its area of effect.
desc:  If this kills the monster that blocked the path to the target
desc: location, the next meteor may continue to find another target.

spell:Rift:35:20:60:25
effect:BEAM:GRAVITY
dice:40+$Dd7
expr:D:PLAYER_LEVEL:+ 0
desc:Fires a gravity beam that hurts each monster in its path
desc: and has a chance of teleporting it away.

spell:Ice Storm:37:25:75:24
effect:PROJECT_LOS:ICE
dice:3d$S
expr:S:PLAYER_LEVEL:* 3
desc:Strikes every monster in line of sight with sheets of ice from above.

spell:Volcanic Eruption:40:30:75:50
effect:SPHERE:FIRE:5
dice:$B+d$S
expr:B:PLAYER_LEVEL:* 3 / 2
expr:S:PLAYER_LEVEL:* 3
effect:EARTHQUAKE:NONE:5
desc:Creates a radius 5 ball of fire, followed by a radius 5 earthquake,
desc: around the player.

spell:River of Lightning:43:35:75:100
effect:ARC:PLASMA:0:20
dice:$Dd8
expr:D:PLAYER_LEVEL:+ 10
desc:Spews plasma in a long narrow cone from the player.


############### PRIEST ###############
name:Priest
stats:-1:-3:3:-1:1
skill-disarm-phys:25:12
skill-disarm-magic:25:12
skill-device:30:10
skill-save:32:12
skill-stealth:2:0
skill-search:10:14
skill-melee:45:20
skill-shoot:35:20
skill-throw:35:20
skill-dig:0:0
hitdie:2
max-attacks:4
min-weight:35
strength-multiplier:3
equip:food:Ration of Food:1:3
equip:light:Wooden Torch:1:3
equip:hafted:Mace:1:1
equip:potion:Cure Serious Wounds:2:2
equip:scroll:Word of Recall:1:1
player-flags:BLESS_WEAPON | ZERO_FAIL
title:Believer
title:Acolyte
title:Devotee
title:Adept
title:Evangelist
title:Priest
title:Elder
title:Prophet
title:Patriarch
title:High Priest

magic:1:350:5

book:prayer book:town:[Novice's Handbook]:6:divine
book-graphics:?:G
book-properties:25:40:1 to 100
equip:prayer book:[Novice's Handbook]:1:1

spell:Call Light:1:1:10:2
effect:LIGHT_AREA
effect:SPOT:LIGHT_WEAK:1:10
dice:2d$S
expr:S:PLAYER_LEVEL:/ 2
desc:Lights up all squares in a level-dependent area, and hurts
desc: all light-sensitive monsters in the area of effect.
desc:  If you are in a room, the entire room will be lit up as well.

spell:Detect Evil:1:1:10:4
effect:DETECT_EVIL
effect-yx:22:40
desc:Detects all evil monsters in the immediate area,
desc: for one turn only.

spell:Minor Healing:1:2:15:4
effect:HEAL_HP
dice:$B+m$M
expr:B:PLAYER_LEVEL:+ 10
expr:M:PLAYER_LEVEL:/ 4
effect:TIMED_DEC:CUT
dice:20
effect:TIMED_DEC:STUN
dice:20
desc:Heals a level-dependent amount or percentage of hitpoints, and
desc: cures 20 points worth of cuts and of stunning.

spell:Bless:1:2:20:4
effect:TIMED_INC:BLESSED
dice:$B+d$S
expr:B:PLAYER_LEVEL:+ 10
expr:S:PLAYER_LEVEL:+ 10
desc:Blesses you, giving a bonus of +5 to AC and +10 to-hit, for 12+1d12 turns.

spell:Sense Invisible:3:4:25:4
effect:TIMED_INC:SINVIS
dice:24+d24
desc:Enables you to see invisible monsters for 24+1d24 turns.

spell:Heroism:5:2:30:5
effect:HEAL_HP
dice:10
effect:CURE:AFRAID
effect:TIMED_INC:HERO
dice:$B+d$S
expr:B:PLAYER_LEVEL:- 19
expr:S:PLAYER_LEVEL:- 19
desc:Cures 10 points of damage, removes fear and, from character level 20,
desc: grants you heroism (resistance to fear, and a bonus of +12 to-hit)
desc: for a level-dependent duration.

book:prayer book:town:[Cleansing Power]:6:divine
book-graphics:?:G
book-properties:100:40:5 to 100

spell:Orb of Draining:7:7:40:4
effect:BALL:HOLY_ORB:2:30
dice:$B+3d6
expr:B:PLAYER_LEVEL:* 3 / 2
desc:Shoots a radius-2 or radius-3 ball that does unresistable
desc: damage to each monster in its area of effect.
desc:  Evil monsters take double damage.
desc:  All cursed items in the area of effect are destroyed.
desc:  The bigger area of effect is attained at character level 30.

spell:Spear of Light:7:6:30:5
effect:LINE:LIGHT_WEAK
dice:6d8
desc:Fires a beam that lights up each square and hurts each
desc: light-sensitive monster in its path.

spell:Dispel Undead:10:14:55:6
effect:PROJECT_LOS_AWARE:DISP_UNDEAD
dice:d$S
expr:S:PLAYER_LEVEL:* 3
desc:Inflicts unresistable damage on each undead monster within line of sight.

spell:Dispel Evil:12:20:70:10
effect:PROJECT_LOS_AWARE:DISP_EVIL
dice:d$S
expr:S:PLAYER_LEVEL:* 3
desc:Inflicts unresistable damage on each evil monster within line of sight.

spell:Protection from Evil:14:8:42:5
effect:TIMED_INC:PROTEVIL
dice:$B+d25
expr:B:PLAYER_LEVEL:* 3
desc:Protects you from evil for a level-dependent duration:
desc: all melee attacks by evil monsters have a chance to be repelled,
desc: unless the monster's level is higher than your character level.

spell:Remove Curse:16:6:38:8
effect:REMOVE_CURSE
dice:$B+d$S
expr:B:PLAYER_LEVEL:+ 0
expr:S:PLAYER_LEVEL:+ 0
desc:Attempts to remove a curse from an item, more effective at higher
desc: character levels.

book:prayer book:dungeon:[Healing and Sanctuary]:6:divine
book-graphics:?:g
book-properties:10000:20:30 to 100

spell:Portal:10:4:30:8
effect:TELEPORT
dice:$B
expr:B:PLAYER_LEVEL:/ 2 + 30
desc:Teleports you randomly over a short distance.

spell:Remembrance:20:30:90:50
effect:RESTORE_EXP
desc:Restores experience points to maximum if it is currently below maximum.

spell:Word of Recall:25:30:75:10
effect:RECALL
desc:Teleports you from the dungeon to the town or from the town to the
desc: deepest level you have visited in the dungeon.
desc:  The recall effect is not immediate; it is delayed by 14+1d20 turns.
desc:  During that delay, the prayer can be canceled by invoking the prayer
desc: of recall again.
desc:  This prayer has no effect when the option to restrict the use of
desc: stairs and recall is set, unless Morgoth is dead.

spell:Healing:30:50:80:100
effect:HEAL_HP
dice:2000
effect:CURE:CUT
effect:CURE:POISONED
effect:CURE:STUN
effect:CURE:AMNESIA
desc:Heals 2000 points of damage and cures all stunning, cuts, poison
desc: and amnesia.

spell:Restoration:35:70:90:130
effect:RESTORE_STAT:STR
effect:RESTORE_STAT:INT
effect:RESTORE_STAT:WIS
effect:RESTORE_STAT:DEX
effect:RESTORE_STAT:CON
desc:Restores to maximum all stats that are currently below maximum.

spell:Clairvoyance:37:50:80:150
effect:LIGHT_LEVEL
desc:Lights up, maps out, and senses all objects on the complete current
desc: dungeon level.

book:prayer book:dungeon:[Battle Blessings]:5:divine
book-graphics:?:g
book-properties:30000:15:40 to 100

spell:Enchant Weapon:35:50:80:230
effect:ENCHANT:TOBOTH
dice:1d4
desc:Attempts to improve the to-hit bonus and the to-dam bonus of a weapon.

spell:Enchant Armour:37:60:85:250
effect:ENCHANT:TOAC
dice:1+1d3
desc:Attempts to improve the armour class bonus of a piece of armour.

spell:Smite Evil:25:20:70:40
effect:TIMED_INC:ATT_EVIL:0:5
dice:20+d20
desc:Temporarily makes your melee attacks slay evil creatures.

spell:Glyph of Warding:20:40:90:35
effect:GLYPH:WARDING
desc:Inscribes a glyph of warding beneath you.
desc:  Summoned monsters can't appear on the glyph.
desc:  If a monster attempts to move onto the glyph or melee you while you
desc: are standing on the glyph, it must first succeed in breaking the glyph.
desc:  Higher level monsters are more likely to break the glyph.
desc:  The glyph will remain where it is, until a monster succeeds in
desc: breaking it, or until you leave the level.

spell:Demon Bane:42:40:80:300
effect:TIMED_INC:ATT_DEMON:0:5
dice:20+d20
desc:Temporarily makes your melee attacks powerfully slay demons.

book:prayer book:dungeon:[Wrath of the Valar]:5:divine
book-graphics:?:g
book-properties:50000:10:60 to 100

spell:Banish Evil:25:25:80:250
effect:PROJECT_LOS_AWARE:AWAY_EVIL
dice:100
desc:Teleports away each evil monster within line of sight.

spell:Word of Destruction:35:35:80:115
effect:DESTRUCTION:LIGHT:15
desc:Destroys everything in a 15-square radius circle around you.
desc:  All monsters, objects, and terrain features in the area of
desc: effect are destroyed, except stairs and permanent walls.
desc:  You will also be blinded for 10+1d10 turns, unless you
desc: have resistance to blindness or light.
desc:  This prayer has no effect when used in the town.

spell:Holy Word:39:32:95:20
effect:PROJECT_LOS_AWARE:DISP_EVIL
dice:d$S
expr:S:PLAYER_LEVEL:* 4
effect:HEAL_HP
dice:1000
effect:CURE:AFRAID
effect:CURE:POISONED
effect:CURE:STUN
effect:CURE:CUT
desc:Inflicts unresistable damage on each evil monster within line of sight,
desc: cures 1000 points of damage, cures all stunning, heals all cut damage,
desc: neutralizes poison, and removes fear.

spell:Spear of Oromë:40:10:75:130
effect:BEAM:HOLY_ORB
dice:$Dd8
expr:D:PLAYER_LEVEL:/ 2
desc:Fires a beam of holy magic that does extra damage to evil creatures.

spell:Light of Manwë:42:40:85:200
effect:BALL:LIGHT:4
dice:$B
expr:B:PLAYER_LEVEL:* 5
effect:PROJECT_LOS:LIGHT_WEAK
dice:100
desc:Casts a radius 4 ball of strong light, and then bathes the entire area
desc: in light doing 100 damage to every light-sensitive creature.


############### NECROMANCER ###############
name:Necromancer
stats:-3:3:0:0:-2
skill-disarm-phys:30:10
skill-disarm-magic:35:12
skill-device:36:13
skill-save:30:9
skill-stealth:2:0
skill-search:10:12
skill-melee:35:25
skill-shoot:20:15
skill-throw:20:15
skill-dig:0:0
hitdie:2
max-attacks:4
min-weight:35
strength-multiplier:3
equip:food:Ration of Food:1:3
equip:sword:Main Gauche:1:1
equip:scroll:Word of Recall:1:1
player-flags:ZERO_FAIL | CHOOSE_SPELLS | UNLIGHT | EVIL
title:Acolyte
title:Curser
title:Dark Student
title:Initiate
title:Slavemaster
title:Summoner
title:Controller
title:Commander
title:Dark Master
title:Night Lord

magic:1:300:5

book:shadow book:town:[Into the Shadows]:5:shadow
book-graphics:?:P
book-properties:25:40:1 to 100
equip:shadow book:[Into the Shadows]:1:1

spell:Nether Bolt:1:1:22:2
effect:BOLT:NETHER
dice:$Dd4
expr:D:PLAYER_LEVEL:/ 4 + 3
desc:Fires a bolt of nether magic.

spell:Sense Invisible:2:4:25:3
effect:TIMED_INC:SINVIS
dice:24+d24
desc:Enables you to see invisible monsters for 24+1d24 turns.

spell:Create Darkness:3:3:10:4
effect:DARKEN_AREA
effect:SPOT:DARK_WEAK:1:10
dice:1
desc:Darkens all squares in a level-dependent area.  If you are in a room,
desc: the entire room will be darkened as well.

spell:Bat Form:3:4:20:10
effect:SHAPECHANGE:bat
desc:Changes you into the shape of a bat, weak but with excellent senses.
desc:  While shapechanged you cannot use items.

spell:Read Minds:4:4:10:6
effect:DETECT_SOUL
effect-yx:22:40
effect:READ_MINDS
dice:$Dd$S
expr:D:PLAYER_LEVEL:/ 10
expr:S:PLAYER_LEVEL:/ 10 + 1
desc:Detects all monsters which have a spirit in the immediate area,
desc: and then maps in a region around them, increasing in size with
desc: character level.

book:shadow book:town:[Dark Rituals]:5:shadow
book-graphics:?:P
book-properties:400:40:10 to 100

spell:Tap Unlife:7:0:50:3
effect:TAP_UNLIFE
dice:$Dd6
expr:D:PLAYER_LEVEL:/ 4 + 2
desc:Targets the nearest undead monster and damages it to gain player mana.

spell:Noxious Fumes:10:4:40:5
effect:SPHERE:POIS:4
dice:$B
expr:B:PLAYER_LEVEL:* 3
effect:TIMED_INC:POISONED
dice:$B
expr:B:PLAYER_LEVEL:* 2
desc:Produces a cloud of poisonous gas affecting the player and monsters within
desc: radius 4.

spell:Sleep Evil:12:5:50:5
effect:PROJECT_LOS:SLEEP_EVIL
dice:$B
expr:B:PLAYER_LEVEL:* 10 + 500
desc:Attempts to put to sleep each evil monster within line of sight.
desc:  Uniques and monsters that resist confusion are not affected.

spell:Shadow Shift:15:10:50:10
effect:TELEPORT
dice:30
effect:DAMAGE
dice:2d5
effect-msg:shadow shifting
desc:Displaces your spirit a short distance, hurting your body as it is
desc: dragged along.

spell:Disenchant:16:12:50:15
effect:BOLT:DISEN
dice:2d$S
expr:S:PLAYER_LEVEL:* 2 + 10
desc:Casts a bolt which wounds, and makes spellcasting monsters less successful
desc: in casting spells.

book:shadow book:town:[Fear and Torment]:5:shadow
book-graphics:?:P
book-properties:1600:20:30 to 100

spell:Frighten:17:4:40:12
effect:BOLT_AWARE:TURN_ALL
dice:$B
expr:B:PLAYER_LEVEL:+ 0
desc:Attempts to scare a single monster for a level-dependent duration.
desc:  Uniques and monsters that resist fear are not affected.

spell:Vampire Strike:20:5:50:10
effect:JUMP_AND_BITE
dice:$B
expr:B:PLAYER_LEVEL:* 2
desc:Teleports you to the nearest living monster and leeches a level-dependent
desc: number of hitpoints, healing and nourishing the player.

spell:Dispel Life:22:20:50:10
effect:PROJECT_LOS_AWARE:MON_DRAIN
dice:d$S
expr:S:PLAYER_LEVEL:* 3
desc:Inflicts unresistable damage on each living monster within line of sight.

spell:Dark Spear:25:10:60:12
effect:LINE:DARK
dice:2d$S
expr:S:PLAYER_LEVEL:* 2
desc:Fires a beam of darkness.

spell:Warg Form:28:20:60:80
effect:SHAPECHANGE:warg
desc:Changes you into the form of a warg, and gives you temporary berserk
desc: strength, at the cost of some hitpoints.


book:shadow book:dungeon:[Deadly Powers]:6:shadow
book-graphics:?:p
book-properties:30000:15:40 to 100

spell:Banish Spirits:25:25:80:25
effect:PROJECT_LOS_AWARE:AWAY_SPIRIT
dice:100
desc:Teleports away each monster with a spirit within line of sight.

spell:Annihilate:30:20:75:25
effect:BOLT:MON_DRAIN
dice:$B
expr:B:PLAYER_LEVEL:* 4
desc:Inflicts damage equal to four times player level on a single monster that
desc: is not undead, an elemental, a golem, or a vortex.

spell:Grond's Blow:35:35:80:115
effect:DESTRUCTION:DARK:15
desc:Destroys everything in a 15-square radius circle around you.
desc:  All monsters, objects, and terrain features in the area of
desc: effect are destroyed, except stairs and permanent walls.
desc:  You will also be blinded for 10+1d10 turns, unless you
desc: have resistance to blindness or dark.
desc:  This ritual has no effect when used in the town.

spell:Unleash Chaos:38:15:90:100
effect:RANDOM
dice:3
effect:BEAM:CHAOS
dice:8d$S
expr:S:PLAYER_LEVEL:+ 0
effect:ARC:CHAOS:0:10
dice:8d$S
expr:S:PLAYER_LEVEL:+ 0
effect:BALL:CHAOS:3
dice:8d$S
expr:S:PLAYER_LEVEL:+ 0
effect:WAKE
effect:PROJECT_LOS:TURN_ALL
dice:$B
expr:B:PLAYER_LEVEL:+ 0
desc:Fires a chaos beam, arc or ball in the chosen direction, wakes everything
desc: in the area, and attempts to frighten everything in line of sight.

spell:Fume of Mordor:40:50:80:150
effect:DARKEN_LEVEL
dice:1
desc:Darkens, maps out, and detects all objects on the complete current
desc: dungeon level.

spell:Storm of Darkness:43:16:80:200
effect:BALL:DARK:4
dice:4d$S
expr:S:PLAYER_LEVEL:* 2
desc:Invokes a radius-4 darkness ball.


book:shadow book:dungeon:[Corruption of Spirit]:5:shadow
book-graphics:?:p
book-properties:50000:10:60 to 100

spell:Power Sacrifice:27:0:20:20
effect:DAMAGE
dice:50
effect-msg:self sacrifice
effect:RESTORE_MANA
dice:50
desc:Exchanges 50 hitpoints for 50 mana.

spell:Crush:32:30:60:130
effect:PROJECT_LOS:MON_CRUSH
dice:$B
expr:B:PLAYER_LEVEL:* 4
desc:Instantly kill any monster in line-of-sight with less than four times the
desc: player's level in hitpoints.  Other monsters are unharmed.

spell:Vampire Form:37:20:60:140
effect:SHAPECHANGE:vampire
effect:JUMP_AND_BITE
dice:$B
expr:B:PLAYER_LEVEL:+ 0
desc:Allows you to assume the form of a vampire at the cost of half your
desc: current hitpoints, then teleports you to the nearest living monster
desc: and leeches a level-dependent number of hitpoints, healing and
desc: nourishing desc: you.  When first transformed you will temporarily be able
desc: to leech hitpoints from living monsters with your bite attack.

spell:Curse:40:50:60:180
effect:DAMAGE
dice:100
effect-msg:performing a curse
effect:CURSE
dice:$Dd$S
expr:D:PLAYER_LEVEL:/ 12 + 1
expr:S:MONSTER_PERCENT_HP_GONE:+ 50
desc:Deals direct damage to a single monster, more the more damaged the monster
desc: is already, at the cost of 100 hitpoints.

spell:Command:45:40:60:250
effect:COMMAND
dice:5+1d10
desc:Allows you to take control of a monster, and move it instead of yourself.

############### PALADIN ###############
name:Paladin
stats:1:-3:1:-1:2
skill-disarm-phys:20:15
skill-disarm-magic:20:10
skill-device:24:10
skill-save:25:11
skill-stealth:0:0
skill-search:10:12
skill-melee:65:40
skill-shoot:50:30
skill-throw:50:30
skill-dig:0:0
hitdie:6
max-attacks:5
min-weight:30
strength-multiplier:5
equip:food:Ration of Food:1:3
equip:light:Wooden Torch:1:3
equip:sword:Main Gauche:1:1
equip:scroll:Protection from Evil:1:1
equip:scroll:Word of Recall:1:1
player-flags:BLESS_WEAPON | SHIELD_BASH
title:Gallant
title:Keeper
title:Protector
title:Defender
title:Warder
title:Knight
title:Guardian
title:Chevalier
title:Paladin
title:Paladin Lord

magic:1:400:3

book:prayer book:town:[Novice's Handbook]:6:divine
equip:prayer book:[Novice's Handbook]:1:1

spell:Bless:1:2:20:4
effect:TIMED_INC:BLESSED
dice:$B+d$S
expr:B:PLAYER_LEVEL:+ 10
expr:S:PLAYER_LEVEL:+ 10
desc:Blesses you, giving a bonus of +5 to AC and +10 to-hit, for 12+1d12 turns.

spell:Detect Evil:3:2:10:4
effect:DETECT_EVIL
effect-yx:22:40
desc:Detects all evil monsters in the immediate area,
desc: for one turn only.

spell:Call Light:5:3:10:2
effect:LIGHT_AREA
effect:SPOT:LIGHT_WEAK:1:10
dice:2d$S
expr:S:PLAYER_LEVEL:/ 2
desc:Lights up all squares in a level-dependent area, and hurts
desc: all light-sensitive monsters in the area of effect.
desc:  If you are in a room, the entire room will be lit up as well.

spell:Minor Healing:7:3:15:4
effect:HEAL_HP
dice:$B+m$M
expr:B:PLAYER_LEVEL:+ 10
expr:M:PLAYER_LEVEL:/ 4
effect:TIMED_DEC:CUT
dice:20
effect:TIMED_DEC:STUN
dice:20
desc:Heals a level-dependent amount or percentage of hitpoints, and
desc: cures 20 points worth of cuts and of stunning.

spell:Sense Invisible:8:4:25:4
effect:TIMED_INC:SINVIS
dice:24+d24
desc:Enables you to see invisible monsters for 24+1d24 turns.

spell:Heroism:12:5:30:5
effect:HEAL_HP
dice:10
effect:CURE:AFRAID
effect:TIMED_INC:HERO
dice:$B+d$S
expr:B:PLAYER_LEVEL:- 14
expr:S:PLAYER_LEVEL:- 14
desc:Cures 10 points of damage, removes fear and, from character level 15,
desc: grants you heroism (resistance to fear, and a bonus of +12 to-hit)
desc: for a level-dependent duration.

book:prayer book:dungeon:[Healing and Sanctuary]:5:divine

spell:Protection from Evil:15:8:42:5
effect:TIMED_INC:PROTEVIL
dice:$B+d25
expr:B:PLAYER_LEVEL:* 3
desc:Protects you from evil for a level-dependent duration:
desc: all melee attacks by evil monsters have a chance to be repelled,
desc: unless the monster's level is higher than your character level.

spell:Remove Curse:20:12:38:8
effect:REMOVE_CURSE
dice:$B+d$S
expr:B:PLAYER_LEVEL:+ 0
expr:S:PLAYER_LEVEL:+ 0
desc:Attempts to remove a curse from an item, more effective at higher
desc: character levels.

spell:Word of Recall:25:30:75:10
effect:RECALL
desc:Teleports you from the dungeon to the town or from the town to the
desc: deepest level you have visited in the dungeon.
desc:  The recall effect is not immediate; it is delayed by 14+1d20 turns.
desc:  During that delay, the prayer can be canceled by invoking the prayer
desc: of recall again.
desc:  This prayer has no effect when the option to restrict the use of
desc: stairs and recall is set, unless Morgoth is dead.

spell:Healing:30:50:80:100
effect:HEAL_HP
dice:2000
effect:CURE:CUT
effect:CURE:POISONED
effect:CURE:STUN
effect:CURE:AMNESIA
desc:Heals 2000 points of damage and cures all stunning, cuts, poison
desc: and amnesia.

spell:Clairvoyance:37:50:80:150
effect:LIGHT_LEVEL
desc:Lights up, maps out, and senses all objects on the complete current
desc: dungeon level.

book:prayer book:dungeon:[Battle Blessings]:5:divine

spell:Smite Evil:25:20:70:40
effect:TIMED_INC:ATT_EVIL:0:5
dice:20+d20
desc:Temporarily makes your melee attacks slay evil creatures.

spell:Demon Bane:30:40:80:150
effect:TIMED_INC:ATT_DEMON:0:5
dice:20+d20
desc:Temporarily makes your melee attacks powerfully slay demons.

spell:Enchant Weapon:35:50:80:230
effect:ENCHANT:TOBOTH
dice:1d4
desc:Attempts to improve the to-hit bonus and the to-dam bonus of a weapon.

spell:Enchant Armour:37:60:85:250
effect:ENCHANT:TOAC
dice:1+1d3
desc:Attempts to improve the armour class bonus of a piece of armour.

spell:Single Combat:40:50:30:300
effect:SINGLE_COMBAT
desc:Encases you and the targeted monster in a stone cell from which only the
desc: winner can emerge.


############### ROGUE ###############
name:Rogue
stats:0:1:-3:3:-1
skill-disarm-phys:45:20
skill-disarm-magic:45:20
skill-device:32:10
skill-save:28:10
skill-stealth:3:1
skill-search:20:16
skill-melee:35:45
skill-shoot:66:30
skill-throw:72:45
skill-dig:0:0
hitdie:4
max-attacks:5
min-weight:20
strength-multiplier:4
equip:food:Ration of Food:1:3
equip:light:Wooden Torch:1:3
equip:sword:Dagger:1:1
equip:soft armour:Soft Leather Armour:1:1
equip:scroll:Word of Recall:1:1
player-flags:CHOOSE_SPELLS | STEAL
title:Vagabond
title:Cutpurse
title:Footpad
title:Robber
title:Burglar
title:Filcher
title:Sharper
title:Rogue
title:Thief
title:Master Thief

magic:5:350:2

book:magic book:town:[First Spells]:7:arcane
equip:magic book:[First Spells]:1:1

spell:Detect Monsters:5:1:50:4
effect:DETECT_VISIBLE_MONSTERS
effect-yx:22:40
desc:Detects all non-invisible monsters in the immediate area,
desc: for one turn only.

spell:Phase Door:7:2:55:4
effect:TELEPORT
dice:10
desc:Teleports you randomly up to 10 squares away.

spell:Object Detection:10:3:60:5
effect:DETECT_GOLD
effect-yx:22:40
effect:DETECT_OBJECTS
effect-yx:22:40
desc:Detects all objects in the immediate area.

spell:Detect Stairs:12:3:50:5
effect:DETECT_STAIRS
effect-yx:44:60
desc:Detects all stairs in a wide area.

spell:Recharging:20:10:50:6
effect:RECHARGE
dice:$B
expr:B:PLAYER_LEVEL:/ 10 + 4
desc:Adds charges to a stack of wands or staves.
desc:  Chance of success and number of charges gained increase with your
desc: level and decrease with level of wand or staff and number of charges.
desc:  A failed attempt to recharge destroys one wand or staff from the stack.

spell:Reveal Monsters:25:3:40:8
effect:DETECT_INVISIBLE_MONSTERS
effect-yx:22:40
effect:DETECT_VISIBLE_MONSTERS
effect-yx:22:40
desc:Detects all monsters in the immediate area, for one turn only.

book:magic book:dungeon:[Arcane Control]:4:arcane

spell:Teleport Self:17:6:35:5
effect:TELEPORT
dice:M$M
expr:M:PLAYER_LEVEL:* 9 / 5
desc:Teleports you randomly within the current level.

spell:Hit and Run:23:20:40:20
effect:TIMED_INC:ATT_RUN
dice:10
desc:Prepares you to teleport a short distance after stealing from a monster.

spell:Teleport Other:30:10:30:50
effect:BOLT_STATUS:AWAY_ALL
dice:$B
expr:B:PLAYER_LEVEL:* 3
desc:Produces a bolt that teleports away the first monster in its path.
desc: Distance teleported increases with player level.

spell:Teleport Level:35:17:65:80
effect:TELEPORT_LEVEL
desc:Teleports you 1 level up or 1 level down (chosen at random).
desc:  This spell may have no effect when the forced descent option is set.


############### RANGER ###############
name:Ranger
stats:0:0:2:1:-1
skill-disarm-phys:40:15
skill-disarm-magic:30:10
skill-device:28:10
skill-save:32:10
skill-stealth:3:0
skill-search:15:15
skill-melee:60:40
skill-shoot:72:45
skill-throw:66:30
skill-dig:0:0
hitdie:5
max-attacks:5
min-weight:35
strength-multiplier:4
equip:food:Ration of Food:1:3
equip:light:Wooden Torch:1:3
equip:sword:Main Gauche:1:1
equip:bow:Short Bow:1:1
equip:arrow:Arrow:15:20
equip:scroll:Word of Recall:1:1
player-flags:FAST_SHOT | CHOOSE_SPELLS
title:Runner
title:Strider
title:Scout
title:Courser
title:Tracker
title:Guide
title:Explorer
title:Pathfinder
title:Ranger
title:Ranger Lord

magic:3:400:2

book:nature book:town:[Lesser Charms]:6:nature
equip:nature book:[Lesser Charms]:1:1

spell:Remove Hunger:3:1:25:2
effect:NOURISH:INC_TO
dice:50
desc:Magically renders you comfortably fed (but not satiated).

spell:Detect Life:5:2:23:2
effect:DETECT_LIVING_MONSTERS
effect-yx:22:40
desc:Detects all living monsters in the immediate area, for one turn only.

spell:Cure Poison:9:4:30:4
effect:CURE:POISONED
desc:Neutralizes poison.

spell:Resist Poison:12:10:32:5
effect:TIMED_INC:OPP_POIS
dice:20+d20
desc:Grants you resistance to poison for 20+1d20 turns.

spell:Turn Stone to Mud:15:5:25:5
effect:LINE:KILL_WALL
dice:20+1d30
desc:Produces a beam that destroys the first section of wall or rubble it hits,
desc: unless it is a permanent wall.  Each monster caught in the beam that
desc: is susceptible to rock remover takes 20+1d30 points of damage.

spell:Sense Surroundings:20:8:35:8
effect:MAP_AREA
dice:$Dd$S
expr:D:PLAYER_LEVEL:/ 30 + 1 * 22
expr:S:PLAYER_LEVEL:/ 30 + 1 * 44
desc:Maps the nearby area.


book:nature book:dungeon:[Nature Craft]:5:nature

spell:Cover Tracks:20:20:40:40
effect:TIMED_INC:COVERTRACKS:0:5
dice:$B+d20
expr:B:PLAYER_LEVEL:* 2
desc:Prevents you from leaving scent for monsters to track you by for a
desc: level-dependent duration.

spell:Create Arrows:22:20:40:40
effect:CREATE_ARROWS
desc:Allows the player to turn a staff into a stack of arrow, with quality
desc: depending on staff level and player level.

spell:Haste Self:25:12:65:15
effect:TIMED_INC:FAST:0:5
dice:$B+d20
expr:B:PLAYER_LEVEL:+ 0
desc:Hastes you (+10 to speed) for a level-dependent duration.

spell:Decoy:30:30:40:60
effect:GLYPH:DECOY
desc:Leaves a magical decoy that looks and sounds like the player.

spell:Herbal Curing:40:20:90:200
effect:CURE:CUT
effect:CURE:POISONED
effect:CURE:STUN
effect:CURE:BLACKBREATH
desc:Cures all cuts, poison, stunning and black breath.


############### BLACKGUARD ###############
#This version of the Blackguard is a melee-focused rage monster. Some examples
#from Tolkien could include Morgoth, Tulkas, Feanor, Turin, Boromir, and
#Uruk-hai such as Ugluk.
name:Blackguard
stats:2:0:-3:0:2
skill-disarm-phys:20:15
skill-disarm-magic:20:10
skill-device:24:10
skill-save:18:10
#skill-stealth:0:0
skill-stealth:-1:-1
skill-search:8:10
skill-melee:65:40
skill-shoot:35:15
skill-throw:40:30
skill-dig:0:0
hitdie:10
max-attacks:5
min-weight:100
strength-multiplier:5
equip:food:Ration of Food:1:3
equip:light:Wooden Torch:1:3
equip:sword:Tulwar:1:1
equip:shield:Leather Shield:1:1
equip:scroll:Word of Recall:1:1
equip:potion:Cure Light Wounds:1:1
#cheap boost here would be a RoOpen Wounds. More fun to let them find it tho.
#obj-flags:IMPAIR_HP
player-flags:COMBAT_REGEN | SHIELD_BASH
# | HUBRIS
#COMBAT_REGEN: Negative 0.5x SP regen. Regains SPs when attacking in melee or
#loses HP to an attack. Magnitude very debatable. For now, 5% of max SPs per
#round of melee blows (min 0.5 SP) and 1% of SP per 1% HP lost.
#HP recovery when MP spent 1% of damage for 2% of max MP
#This amounts to a 25% rebate on damage, if on average you're at 50% HP
#There's a 2x bonus if not spent but degenerated, if you can wait that long!
#This is a 50% rebate, and is probably too much.
#FCPB sp gain for Rage Mage sp = dam*(mhp*3/2 - chp)/mhp [min 1]
#ranges from 1.5x at near death to 0.5x at full health. BG way less.
#FCPB sp loss per turn csp/8 + lev/10 + 1 very fast in practice
#Ideally 1 SP for a BG will be worth about 1 SP for anyone else to make spell
#design easier. Normal HP/SP regen 0.3%
#Paly heal max 60 or 12% of damage for 3 MP, 2000 (~1000 really) for 50 MP
#Definitely do not want to exceed that, as healing is more Paly domain and
#Paly has to spend a turn for the healing.
#HUBRIS: Sometimes challenge (wake) nearby sleeping enemies whose natural
#depth is at least 10 levels less than the max depth the BG has visited.
title:Rat
title:Bully
title:Thug
title:Ruffian
title:Brigand
title:Raider
title:Tormentor
title:Marauder
title:Destroyer
title:Tyrant

magic:1:600:3

#All these spells are physical or rage based.
book:shadow book:town:[Into the Shadows]:6:shadow
equip:shadow book:[Into the Shadows]:1:1

#Sure, not all living monsters have fear, but it's good enough for now.
#Everyone else gets detect much earlier, but the book themes are really
#nice with this here.
#Compare Ranger's spell:Detect Life:5:2:23:2
#Compare Druid's  spell:Detect Life:1:1:23:2
spell:Seek Battle:1:1:15:2
effect:DETECT_LIVING_MONSTERS
effect-yx:22:40
desc:Detects all living monsters in the immediate area, for one turn only.
desc: TODO(Detects fearable monsters, living or dead)

#Based loosely on Paladin's spell:Bless:1:2:20:4 PL+10+1d(PL+10) duration
#?Holy Chant costs 40 for 12+d24 bless. !Bers costs 100 for 30 HP and 25+d25
#old Ranger spell:Berserker:23:30:80:35 included 30 HP heal
#old Rogue  spell:Berserker:28:20:60:60 included 30 HP heal
#recent BG  spell:Berserk Rage:14:10:10:10 all above dur 25+1d25
spell:Berserk Strength:3:2:20:4
#spell:Laugh of Tulkas:3:2:20:4
effect:CURE:AFRAID
effect:TIMED_INC:SHERO:0:5
dice:$B+d$S
expr:B:PLAYER_LEVEL:+ 5
expr:S:PLAYER_LEVEL:+ 5
desc:Removes fear and grants you berserk strength (resistance to fear,
desc: a bonus of +24 to-hit, a penalty of -10 to AC, and prevents healing
desc: over time) for a level-dependent duration (av. 8+1.5*level turns).

#I think attack will be ROUND_UP(blows*(4-spaces moved)/4) to encourage hvy
#And/or add 1 blow so it can be used effectively adjacent as well
#This will be occasionally useful at melee range, notably CL 20 to stat gain.
#Compare with Rogue's spell:Phase Door:7:2:55:4 range 10 but no partial attack
#Compare with Mage's  spell:Phase Door:2:2:22:4
#spell:Leap of Beren:5:4:25:6
spell:Wrath of Tulkas:5:4:25:6
#effect:CHARGE:4
effect:JUMP_AND_BITE
dice:0
effect:MELEE_BLOWS
dice:$B
expr:B:PLAYER_LEVEL:+ 10 / 15
#desc:You may run up to 4 spaces towards targeted enemy, then perform a
#desc: level-dependent number of melee blows. The number of blows starts at 1
#desc: and goes up every 15 levels (max 4 at 50). If you moved, the number of
#desc: blows is reduced by 25% for each space, then rounded.
desc:Teleports you to the nearest living monster and deals a level-dependent
desc: number of blows. The number of blows starts at 1 and goes up every
desc: 15 levels (max 4 at 50). TODO(Max range 4; If you moved, the number of
desc: blows is reduced by 25% for each space, then rounded.)

#Gives a utility spell and a reason to bully
#monsters to get SPs to get gold veins and make shortcuts. Not the intention,
#but since we're giving this power we'll add a nice boost vs rock monsters.
#4 vulnerable monsters with 1-2 rarity from depth 15-19, 3 uniques at L30,
#15 monsters total.
#Tried adding melee blows but it just didn't make sense. Got Tulkas for that.
#Based on Ranger's  spell:Turn Stone to Mud:15:5:25:5
#Compare to Druid's spell:Turn Stone to Mud:8:3:25:5
spell:Shatter Stone:7:3:20:8
#effect:SHORT_BEAM:KILL_WALL:1
effect:LINE:KILL_WALL
dice:20+1d30
desc:Destroys an TODO(adjacent) section of wall or rubble,
desc: unless it is a permanent wall. Deals 20+1d30 damage to monsters
desc: vulnerable to rock remover.

#This spell is really questionable. I think I invented it before degen SPs
#gave bonus healing to the player. Now I'm not sure if it serves a purpose.
#Rage doesn't usually build up too much, and lust maxes at 50.
spell:Soothe Savagery:10:5:20:10
effect:CURE:SHERO
effect:CURE:BLOODLUST
effect:CURE:TAUNT
effect:HEAL_HP
dice:m3
effect:TIMED_INC:SLOW
dice:4
desc:Focuses your energies on regeneration. Calms Berserk Rage and Blood
desc: Lust so that you can regain HP from resting. Ends TAUNT. The effect leaves
desc: you briefly ill-suited to do battle. TODO(uses all your SPs at once)

#This spell has two big problems: It relies on monster memory and alertness. If
#you don't know that a monster can paralyze or confuse then it will be too
#late, if you fail your save. Also, if you don't have the MP available when
#you spot the monster, it will be hard to get it. Detection can help.
#Umber hulks at DL16 are first mobile to cause melee confusion, and are deadly.
#Homunculi at DL15 are first mobile to cause melee paralysis.
#There are a lot more poisonous monsters (74 melee, 43 ranged, 98 total).
#Notably Air Hounds and 3-headed Hydra are depth 20.
#Want this to be high enough level that you're relieved when you get it
#rConf is hard to get. FrAct is easy, but crucial.
#Cost adj for objects: rPois 28, rConf 24, FrAct 8 m2,
#27 monsters can paralyze and 30 confuse at melee, 37 can cast slow.
#Compare Druid's spell:Resist Poison:7:6:32:5 duration 20+d20
#Compare Ranger's spell:Resist Poison:12:10:32:5 duration 20+d20
spell:Grim Purpose:15:9:35:14
effect:TIMED_INC:OPP_CONF
dice:12+d12
effect:TIMED_INC:FREE_ACT
dice:12+d12
desc:Your mind becomes too focused to be slowed, paralyzed or confused
desc: for 12+d12 turns.

#All these spells are related to fear and torment. Duh!
book:shadow book:town:[Fear and Torment]:5:shadow

#No other spells stun except Shock Wave (chance), so that's a fun addition.
#Stun very useful for melee. Wand effect dice is 5+1d5, but unsure of meaning.
#Very few monsters resist stun (94) vs 325 for rConf, 169 for IM_FIRE, etc.
#All 71 undead have NO_STUN. 44 nonliving are stunnable, though (3 bases).
#CL13 chosen somewhat for thematic reasons. Can reduce diff with ATT_STUN
#I think this does not have to scale with level because stun doesn't
#wear off faster on higher level monsters, so it's always an effective debuff.
spell:Inflict Pain:13:6:30:12
effect:MELEE_BLOWS
dice:1
#effect:SHORT_BEAM:DARK:1
#dice:$B
#expr:B:WEAPON_DAMAGE:* 2
effect:SHORT_BEAM:MON_STUN:1
dice:5+1d5
desc:Deals weapon damage *2 to an adjacent enemy. Stuns that enemy for 5+1d5
desc: turns. TODO(replace weap dam with 1 melee blow, stun beam with ATT_STUN)

#Unlike many AoEs this does not lose effectiveness with distance from epicenter
#TODO:Consider making lose effectiveness with range
#This spell actually does affect uniques! Effect is not cumulative.
#149 of 623 have NO_FEAR, 108 from 11 base types, 41 individual or both.
#201 of 623 are immune to this spell in total (52 fearable undead)
#46 nonliving also have NO_FEAR.
#compare Necro's spell:Frighten:17:4:40:12 (1 target; dur:PL)
#4.2.0 spell:Cry of the Damned:17:5:30:12 dur:PL
spell:Howl of the Damned:18:8:30:16
effect:PROJECT_LOS:TURN_ALL
dice:$B
expr:B:PLAYER_LEVEL:+ 0
desc:Attempts to scare every monster in line of sight for a
desc: player level and monster depth duration (av. 2*level/(2+RD(depth/10))
desc: turns). Monsters that resist fear are not affected.
#PL40 and mon depth 80s gives about 8 monster turns.

#256 of 623 have IM_POIS. 133 from 13 base types, 123 individual or both.
#compare Paladin's spell:Smite Evil:25:20:70:40 dur 20+d20, 2x slay
#compare Paladin's spell:Demon Bane:30:40:80:150 dur 20+d20, 5x slay
#this is a x3 brand. 20 SP is pretty high. Need foresight to start w/20 SP.
#4.2.0Poison Brand:20:30:40:90
spell:Venom:24:20:40:30
effect:TIMED_INC:ATT_POIS:0:5
dice:20+d20
desc:Coats all your melee weapons with poison for 20+d20 turns.

#Orig:Taunt:24:10:40:150 but in dungeon book
#decreases likelihood of casting when fleeing as well.
#When taunted mon->min_range is set, but best_range remains unchanged.
#When feared & taunted min_range=flee_range. When only taunted min_range=1.
spell:Provoke:28:10:35:20
effect:TIMED_INC:TAUNT
dice:10+d10
desc:Makes anything that can move more inclined to run toward you than make a
desc: ranged attack. Duration 10+d10 turns.
#Pretty sure this is going to have to be PROJECT_LOS like Howl to avoid
#conflicting with Fear.

#I'm thinking of the humanoid version
#of werewolf. This would be the least spellcasty class to shapechange.
#If we want heavy weapons, giving BGs an extra blow or two would
#definitely move them in that direction. Werewolf seems only slightly
#shapeshifty, thematically, and is a classic rage monster. Also goes well
#with Howl of the Damned.
#Thought about tying this to Beren's use of the wolf-hame of Drauglin
#compare Necro spell:Warg Form:28:20:60:80
spell:Werewolf Form:33:25:45:80
effect:SHAPECHANGE:werewolf
desc:With a blood-curdling cry you change into a half-man half-wolf!
desc: In this form you move and attack faster.

book:shadow book:dungeon:[Deadly Powers]:5:shadow

spell:Whirlwind Attack:26:13:40:50
effect:SPHERE:DARK:1
dice:$Sd$B
expr:B:WEAPON_DAMAGE:* 12
expr:S:PLAYER_LEVEL:- 16 / 10
desc:Deals dark damage equal to weapon damage *3 to all adjacent enemies.
desc:Increases to *6 at level 36 and *9 at level 46. TODO(replace with blows)
#desc:Deals a level-dependent number of melee blows to each adjacent enemy.

#This is so quirky and flavorful I don't want to mess with it much
#4.2.0Thirst for Blood:32:30:40:100
spell:Bloodlust:30:30:40:100
effect:TIMED_INC:BLOODLUST:0:-1
dice:10
#effect:DAMAGE
#dice:50
#effect-msg:blood sacrifice
desc:Gives you a powerful desire to kill, increased every time you satisfy it.
desc: Gives you extra damage and, at higher levels, extra blows, but comes
desc: with dangerous side-effects.

#Point of this spell is to make meleeing monsters less of a hassle.
#115 monsters with a melee attack that drains charges, xp, stats, enchantment.
#42 have attacks that are not cured by this spell.
#Cost adj for objects: sSTR 9, sINT & sWIS 4, sDEX 7, sCON 8, hLife 5 m2
#Compare Ranger's spell:Herbal Curing:40:20:90:100 cut,pois,stun,blbrth
#Compare Druid's spell:Revitalize:35:70:90:90 all stats & xp.
spell:Unholy Reprieve:34:66:60:120
effect:RESTORE_STAT:STR
effect:RESTORE_STAT:INT
effect:RESTORE_STAT:CON
effect:RESTORE_EXP
desc:Restores STR, INT, CON, and experience

#project_monster_handler_FORCE says 3 + dam/20 spaces for all monsters.
#TODO:Consider varying that per monster, maybe by max hp?
#Changed this from 200 to level-dependent. It's the same at CL40.
#4.2.0Throw Monster:27:12:50:30
spell:Forceful Blow:40:16:50:150
effect:MELEE_BLOWS
dice:1
effect:SHORT_BEAM:FORCE:1
dice:2d$B
expr:B:PLAYER_LEVEL:* 4
desc:Attempts a melee blow and hits the target with force, throwing it back
desc: (av level*4 force damage)
#TODO(change to ATT_FORCE)

#Maybe the rubble effect would be better
#Druid spell:Volcanic Eruption:40:30:75:50
spell:EXPERIMENTAL Quake:44:18:60:175
effect:EARTHQUAKE:NONE:5
desc:Causes a radius 5 earthquake centered around the player. This spell has
desc: not been carefully tested or balanced.

#Other promising thoughts:
# - Spell that does weapon damage times x blows. Would allow effective use of
#     very heavy weapons
# - Class flags down to two. Could even put IMP_HP in COMBAT_REGEN.
#     so we can put in crowd fighting, shield bash, aggravate or something
#     entirely new.
# - Aura that damages enemies when they hit you in melee or from anywhere
#     or just from being adjacent to you.
# - Buff that gives +1 melee blow
# - When a spell relies on a blow connecting, could:
#   - Leave an ATT_CONF style buff in place
#   - Lower spell fail rates a lot to compensate for contact fail
#   - Make it not depend upon a blow landing
# - Laugh of Tulkas
#   - IDK yet what it will do but I like the title!
# - Deep descent spell?
# - Summon monster?
# - IMPAIR_MP hinder MP gains and degen for BG? Currently does nothing.

#TODO before can even test as-is
# - Make SHORT_BEAM:KILL_WALL:1 work
# - Make charge more like running fast
#TODO later
# - Smell fear only sense fearable monsters.
# - Drain is used to mean so many things. I don't love "leech" or "siphon"
#     but I think there should be a term to mean "reducing enemy HPs and
#     restoring an equal number of your own."
# - If people like the (av. X turns) notation for level-dependent effects,
#     apply that to all descriptions.
# - Standardize 1dxx or dxx
# player-spell.c
# - static int spell_value_base_weapon_damage(void)
# player-util.c
# -	sp_gain = ((long)p->msp) * percent + PY_REGEN_MNBASE;
#   - percent is negative for BGs but PY_REGEN_MNBASE is positive.
# - sp_gain_frac = (sp_gain & 0xFFFF) + p->csp_frac;	/* mod 65536 */
#   - Not sure if this stuff works with a negative regen.
# player-attack.c
# - static bool py_attack_real(struct player *p, struct loc grid, bool *fear)
#   - Attacks the monster at the given location with a single blow.
#   - If bloodlust, 1 in 50 chance to over exert CON.


####ABANDONED####
#spell:Pleasure in Pain:14:9:35:8
#effect:PAIN:1
#effect:MELEE_BLOWS:1
#effect:LEECH_MON:$B+d$S
#expr:B:PLAYER_LEVEL:+ 5
#expr:S:PLAYER_LEVEL:+ 5
#effect:SHORT_BEAM:MON_STUN:1
#dice:5+1d5
#desc:Deal one melee blow to an adjacent enemy. If it hits, that enemy will be
#desc: stunned for X turns. If the enemy is living, you leech an additional
#desc: level-dependent number of hitpoints (av. 1.5*level HPs).
